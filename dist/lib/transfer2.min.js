webpackJsonp([17],{"7fJ5":function(e,t){e.exports='<div class="ma-tree-select transition-none"\n  ng-disabled="disabled">\n  <div class="custom-multi-select form-control ui-select-container ui-select-multiple select2 select2-container select2-container-multi ng-isolate-scope ng-not-empty ng-valid custom-tree-select custom-static-select">\n\n    <div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active select2-display-none">\n      <div class="search-container select2-search">\n        <div class="ma-input ma-input-search-normal"\n          ng-disabled="disabled">\n          <input type="text"\n            autocomplete="off"\n            autocorrect="off"\n            autocapitalize="off"\n            spellcheck="false"\n            role="combobox"\n            aria-expanded="true"\n            aria-owns="ui-select-choices-0"\n            aria-label="Select box"\n            class="select2-input ui-select-search ng-pristine ng-valid ng-empty ng-touched"\n            ng-model="$ctrl.searchKey"\n            ng-disabled="disabled"\n            ondrop="return false;">\n        </div>\n      </div>\n      <ul tabindex="-1"\n        class="ui-select-choices ui-select-choices-content select2-results ng-scope">\n\n      </ul>\n    </div>\n  </div>\n</div>\n'},BWKA:function(e,t){e.exports='<div class="ma-transfer">\n  <div class="fl">\n    <div class="ma-transfer-left-result">\n      <ma-checkbox ng-disabled="disabled"\n        ng-class="{\n          \'has-sub\': $ctrl.leftSub,\n        }"\n        ng-model="$ctrl.leftCheckbox">\n      </ma-checkbox>\n\n      <span class="ma-transfer-title">{{leftTitle || \'所有\'}}</span>\n    </div>\n    <ma-tree ng-disabled="disabled"\n      class="ma-transfer-left-tree"\n      ng-model="$ctrl.leftSelected"\n      ma-data="$ctrl.leftData"\n      ma-value-key="{{valueKey}}"\n      ma-sub-key="{{subKey}}"\n      ma-text-key="{{textKey}}"\n      ma-hide-items="$ctrl.leftHideItems"></ma-tree>\n  </div>\n  <div class="fl ma-transfer-center">\n    <div class="mb-20">\n      <ma-button ng-disabled="$ctrl.leftButtonDisabled"\n        ma-click="$ctrl.toRight($event)">\n        <span>添加</span>\n        <ma-icon ma-type="arrowright"></ma-icon>\n      </ma-button>\n    </div>\n    <div>\n      <ma-button ng-disabled="$ctrl.rightButtonDisabled"\n        ma-click="$ctrl.toLeft($event)">\n        <ma-icon ma-type="arrowleft"></ma-icon>\n        <span>删除</span>\n      </ma-button>\n    </div>\n  </div>\n  <div class="fl">\n    <div class="ma-transfer-right-result">\n      <ma-checkbox ng-disabled="disabled"\n        ng-class="{\n          \'has-sub\': $ctrl.rightSub,\n        }"\n        ng-model="$ctrl.rightCheckbox">\n      </ma-checkbox>\n\n      <span class="ma-transfer-title">{{rightTitle || \'选中\'}}</span>\n    </div>\n    <ma-tree ng-disabled="disabled"\n      class="ma-transfer-right-tree"\n      ng-model="$ctrl.rightSelected"\n      ma-data="$ctrl.rightData"\n      ma-value-key="{{valueKey}}"\n      ma-sub-key="{{subKey}}"\n      ma-text-key="{{textKey}}"\n      ma-show-items="$ctrl.rightShowItems"></ma-tree>\n  </div>\n</div>\n'},e2Tx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("pL48"),l=function(e){return e&&e.__esModule?e:{"default":e}}(n);angular.module(l["default"],[]).config(function(){}).run(function(){}),a("xEAJ"),a("s87f"),t["default"]=l["default"]},oXUz:function(e,t){e.exports=' {{each data}}\n {{if !$value._parent || renderSub}}\n<li class="ui-select-choices-row tree-level-{{$value._level}} {{$value._sub ? \'has-sub\': \'\'}}"\n  data-value="{{$value[valueKey]}}"\n  data-from="{{$value._from}}"\n  data-to="{{$value._to}}">\n  <div class="select2-result-label ui-select-choices-row-inner">\n    <div>\n      {{if $value._sub}}\n      <i class="tree-arrow-click">\n        <i class="tree-arrow"></i>\n      </i>\n      {{/if}}\n      \x3c!-- <div class="click-mask"></div> --\x3e\n      <label class="ma-checkbox">\n        <input type="checkbox" />\n        <i class="checkbox-appearance"></i>\n        <span>{{$value[textKey]}}</span>\n      </label>\n    </div>\n  </div>\n</li>\n{{/if}}\n{{/each}}\n'},pL48:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]="meetyou.angular.ui.transfer2"},s87f:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(){return{restrict:"E",replace:!0,scope:{data:"=maData",model:"=ngModel",valueKey:"@maValueKey",textKey:"@maTextKey",subKey:"@maSubKey",disabled:"=ngDisabled",leftTitle:"@maLeftTitle",rightTitle:"@maRightTitle"},template:r["default"],controllerAs:"$ctrl",controller:["$scope","$element",function(e,t){function a(){l("left")}function n(){l("right")}function l(a){var n=(0,u["default"])(t).find(".ma-transfer-"+a+"-tree.ma-tree-select .tree-level-0"),l=[],i=f[a+"Selected"]||[],c=0,s=0;n.each(function(){(0,u["default"])(this).hasClass("hidden")||l.push((0,u["default"])(this).attr("data-value"))}),l.forEach(function(e){-1!==i.indexOf(e)&&c++,s++}),s>0&&(f[a+"Sub"]=c>0&&c<s,c===s?!1===f[a+"Checkbox"]&&(f[a+"Checkbox"]=!0,e.isSelectedChangeCheckbox=!0):!0===f[a+"Checkbox"]&&(f[a+"Checkbox"]=!1,e.isSelectedChangeCheckbox=!0))}function i(){angular.isNull(e.model)&&(e.model=[]),e.model=e.model.concat(f.leftSelected),f.leftSelected=[],f.rightSelected=[],f.leftCheckbox=!1,f.rightCheckbox=!1}function c(){angular.isNull(e.model)&&(e.model=[]);var t=s(),a=[],n=d();angular.each(t,function(e){-1===n.indexOf(e)&&a.push(e)}),e.model=a,f.leftSelected=[],f.rightSelected=[],f.leftCheckbox=!1,f.rightCheckbox=!1}function s(){function t(i){angular.each(i,function(i){-1!==n.indexOf(i[e.valueKey])?i[e.subKey]&&i[e.subKey].length?a(i[e.subKey]):l.push(i[e.valueKey]):t(i[e.subKey])})}function a(t){angular.each(t,function(t){t[e.subKey]&&t[e.subKey].length?a(t[e.subKey]):l.push(t[e.valueKey])})}var n=e.model||[],l=[];return t(e.data),l}function d(){function t(n){angular.each(n,function(n){var i=n[e.subKey];-1!==l.indexOf(n[e.valueKey])&&i&&i.length?a(i):i&&i.length&&t(i)})}function a(t){angular.each(t,function(t){n.push(t[e.valueKey]),t[e.subKey]&&t[e.subKey].length&&a(t[e.subKey])})}var n=[],l=f.rightSelected||[];return t(e.data),l.concat(n)}function r(){function t(l){var i=0;return angular.forEach(l,function(l){if(-1!==a.indexOf(l[e.valueKey]))n.push(l[e.valueKey]),i++;else{var c=l[e.subKey];if(c&&c.length){t(c)>=c.length&&(n.push(l[e.valueKey]),angular.each(c,function(t){-1!==n.indexOf(t[e.valueKey])&&n.splice(n.indexOf(t[e.valueKey]),1)}))}}}),i}var a=e.model||[],n=[],l=0;return t(e.data),n.forEach(function(e){-1!==a.indexOf(e)&&l++}),!!(l&&l<a.length)&&n}function o(){var t=u["default"].extend(!0,[],e.data),a=u["default"].extend(!0,[],e.data);f.leftData=t,f.rightData=a}var f=this;f.searchKey="",f.leftSub=!1,f.leftCheckbox=!1,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.rightSub=!1,f.rightCheckbox=!1,f.toRight=i,f.toLeft=c,f.leftSelected=[],f.rightSelected=[],f.leftData=[],f.rightData=[],f.leftHideItems=[],f.rightShowItems=[],e.$watch("data",function(e){o()}),e.$watch("model",function(t){var a=r();if(a)return void(e.model=a);f.leftHideItems=t||[],f.rightShowItems=t||[]}),e.$watch("$ctrl.leftCheckbox",function(t){if(e.isSelectedChangeCheckbox)return void(e.isSelectedChangeCheckbox=!1);!0===t&&(f.leftSelected="all"),!1===t&&(f.leftSelected=[])}),e.$watch("$ctrl.rightCheckbox",function(t){if(e.isSelectedChangeCheckbox)return void(e.isSelectedChangeCheckbox=!1);!0===t&&(f.rightSelected="all"),!1===t&&(f.rightSelected=[])}),e.$watch("$ctrl.leftSelected",function(e){f.leftButtonDisabled=!(e&&e.length),a()}),e.$watch("$ctrl.rightSelected",function(e){f.rightButtonDisabled=!(e&&e.length),n()})}],link:function(e,t,a,n){e.textKey=a.maTextKey||"text",e.valueKey=a.maValueKey||"value",a.$observe("maTextKey",function(t){e.textKey=t||"text"}),a.$observe("maValueKey",function(t){e.valueKey=t||"value"})}}}var i=a("pL48"),c=n(i),s=a("7t+N"),u=n(s),d=a("BWKA"),r=n(d);angular.module(c["default"]).directive("maTreeTransfer2",l),l.$inject=[]},xEAJ:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(){return{restrict:"E",replace:!0,scope:{data:"=maData",model:"=ngModel",valueKey:"@maValueKey",textKey:"@maTextKey",subKey:"@maSubKey",disabled:"=ngDisabled",showItems:"=maShowItems",hideItems:"=maHideItems"},template:f["default"],controllerAs:"$ctrl",controller:["$scope","$element",function(e,t){function a(){e.disabled?p.find("input, .ma-checkbox").attr("disabled",!0):p.find("input, .ma-checkbox").attr("disabled",!1)}function n(t){var a=(0,r["default"])(u["default"].render(m["default"],{data:t,textKey:e.textKey,valueKey:e.valueKey}));d(a),p.html(a),l()}function l(){if(e.hideItems){var t=c(e.hideItems),a=i(e.hideItems);p.find(y).removeClass("hidden"),e.hideItems.forEach(function(t){var a=angular.isObject(t)?t[e.valueKey]:t;p.find(y+'[data-value="'+a+'"]').addClass("hidden")}),a.forEach(function(e){p.find(y+'[data-value="'+e+'"]').addClass("hidden")}),t.forEach(function(e){p.find(y+'[data-value="'+e+'"]').removeClass("hidden")})}if(e.showItems){var n=c(e.showItems),l=i(e.showItems);p.find(y).addClass("hidden"),e.showItems.forEach(function(t){var a=angular.isObject(t)?t[e.valueKey]:t;p.find(y+'[data-value="'+a+'"]').removeClass("hidden")}),n.concat(l).forEach(function(e){p.find(y+'[data-value="'+e+'"]').removeClass("hidden")})}}function i(t){function a(t){var l=t[e.subKey];l&&l.length&&l.forEach(function(t){n.push(t[e.valueKey]),a(t)})}var n=[];return angular.each(e.newItems,function(n){-1!==t.indexOf(n[e.valueKey])&&a(n)}),n}function c(t){var a=[];return angular.each(e.newItems,function(n){if(-1!==t.indexOf(n[e.valueKey]))for(var l=n;l._parent;)a.push(l._parent[e.valueKey]),l=l._parent}),a}function s(t){if(!e.disabled){var a=(0,r["default"])(t.target),n=a.parents(y),i=n.attr("data-to"),c=p.find(y+'[data-from*="'+i+'"]');c.length?c.toggleClass("hide"):(c=(0,r["default"])(u["default"].render(m["default"],{data:x[i],textKey:e.textKey,valueKey:e.valueKey,renderSub:!0})),c.insertAfter(n),d(c,n),l()),a.parent().toggleClass("tree-open")}}function d(e,t){e.find(".tree-arrow-click").on("click",s),e.find('input[type="checkbox"]').on("change",function(e){h((0,r["default"])(e.target).parents(y).attr("data-to"),e.target.checked),v((0,r["default"])(e.target).parents(y).attr("data-from"),e.target.checked),o()}),t&&h(t.attr("data-to"),t.find("input").prop("checked")),a()}function o(){var t=[];p.find("input:checked").each(function(){var e=(0,r["default"])(this).parents(y),a=e.attr("data-from");return p.find(y+'[data-to="'+a+'"]').attr("data-value"),!!f(e)||(t.push(e.attr("data-value")),!0)}),e.$applyAsync(function(){e.model=t})}function f(e){var t=e.attr("data-from"),a=p.find(y+'[data-to="'+t+'"]'),n=!1;return n=!!(t&&a.length&&a.find("input").prop("checked")),!1===n&&t&&a.attr("data-from")&&(n=f(a)),n}function h(e,t){if(e){var a=p.find(y+'[data-from="'+e+'"]'),n=p.find(y+'[data-to="'+e+'"]');a.each(function(){(0,r["default"])(this).hasClass("hidden")||((0,r["default"])(this).find("input").prop("checked",t),h((0,r["default"])(this).attr("data-to"),t))}),n.find(".ma-checkbox").removeClass("has-sub")}}function v(e){if(e){var t=p.find(y+'[data-to="'+e+'"]'),a=t.find(".ma-checkbox"),n=b(e);a.removeClass("has-sub"),n.count<=0?(t.find("input").prop("checked",!1),n.sub&&a.addClass("has-sub")):n.count>=n.total?t.find("input").prop("checked",!0):(t.find("input").prop("checked",!1),a.addClass("has-sub")),v(t.attr("data-from"))}}function b(e){var t=p.find(y+'[data-from="'+e+'"]'),a=0,n=0,l=0;return t.each(function(){(0,r["default"])(this).hasClass("hidden")||((0,r["default"])(this).find("input").prop("checked")&&a++,(0,r["default"])(this).find(".ma-checkbox").hasClass("has-sub")&&l++,n++)}),{total:n,count:a,sub:l}}function g(t){function a(e,t,i){angular.each(e,function(e){var c=e;n.push(c),c._level=i,c[l]&&c[l].length&&(c.tagId=t?t.tagId+"_"+angular.uuid():"tag_"+angular.uuid(),c._to=c.tagId,c._sub=!0,x[c.tagId]=c[l],angular.forEach(c[l],function(e){e._parent=c,e._from=c.tagId}),a(c[l],c,i+1))})}var n=[],l=e.subKey;return x={},a(t,null,0),n}var p=(0,r["default"])(t).find(".ui-select-choices-content"),y=".ui-select-choices-row",x={};e.$watch("disabled",a),e.$watch("data",function(t){var a=g(t);e.newItems=a,n(a)}),e.$watch("showItems",function(e){e&&l()}),e.$watch("hideItems",function(e){e&&l()}),e.$watch("model",function(t){if(angular.isEmpty(t)&&(p.find(y).each(function(){(0,r["default"])(this).find("input").prop("checked",!1)}),p.find(".ma-checkbox").removeClass("has-sub")),"all"===t){var a=[];p.find(y).each(function(){(0,r["default"])(this).hasClass("hidden")||((0,r["default"])(this).find("input").prop("checked",!0),a.push((0,r["default"])(this).attr("data-value")))}),p.find(".ma-checkbox").removeClass("has-sub"),e.model=a}})}],link:function(e,t,a,n){e.textKey=a.maTextKey||"text",e.valueKey=a.maValueKey||"value",a.$observe("maTextKey",function(t){e.textKey=t||"text"}),a.$observe("maValueKey",function(t){e.valueKey=t||"value"})}}}var i=a("pL48"),c=n(i),s=a("H+C6"),u=n(s),d=a("7t+N"),r=n(d),o=a("7fJ5"),f=n(o),h=a("oXUz"),m=n(h);angular.module(c["default"]).directive("maTree",l),l.$inject=[]}},["e2Tx"]);
//# sourceMappingURL=transfer2.min.js.map