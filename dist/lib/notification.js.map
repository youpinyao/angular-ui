{"version":3,"sources":["webpack:///./src/components/notification/src/maNotificationTpl.html","webpack:///./src/components/notification/index.js","webpack:///./src/components/notification/src/name.js","webpack:///./src/components/notification/src/service.js"],"names":[],"mappings":";;;;;AAAA,iKAAiK,OAAO,gP;;;;;;;;ACAxK;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;;AAEA,sCAAsC,uCAAuC,kBAAkB;;AAE/F,2DAA2D,oBAAoB;;AAE/E;;AAEA,uC;;;;;;;;AChBA;;AAEA;AACA;AACA,CAAC;AACD,uD;;;;;;;;ACLA;;AAEA,oGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,kBAAkB;;AAE/F;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA,kDAAkD,QAAQ;AAC1D;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,eAAe;AACf,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,WAAW;AACX;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,GAAG;AACH,C","file":"notification.js","sourcesContent":["module.exports = \"<div class=\\\"ma-notification\\\">\\n  <div class=\\\"ma-notification__group\\\">\\n    <h2 class=\\\"ma-notification__title\\\"\\n      ng-show=\\\"title\\\">{{title}}</h2>\\n    <div class=\\\"ma-notification__content\\\"\\n      ng-bind-html=\\\"message\\\"></div>\\n    <a class=\\\"ma-notification__closeBtn ma-icon-close\\\"\\n      ng-click=\\\"nClick()\\\"><i class=\\\"iconfont icon-close\\\"></i></a>\\n  </div>\\n</div>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/notification/src/maNotificationTpl.html\n// module id = +U+0\n// module chunks = 24","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _name = require('./src/name.js');\n\nvar _name2 = _interopRequireDefault(_name);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nangular.module(_name2['default'], []).config(function () {}).run(function () {});\n\nrequire('./src/service.js');\n\nexports['default'] = _name2['default'];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/notification/index.js\n// module id = UJDU\n// module chunks = 24","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports['default'] = 'meetyou.angular.ui.notification';\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/notification/src/name.js\n// module id = mBbU\n// module chunks = 24","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _name = require('./name.js');\n\nvar _name2 = _interopRequireDefault(_name);\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _maNotificationTpl = require('./maNotificationTpl.html');\n\nvar _maNotificationTpl2 = _interopRequireDefault(_maNotificationTpl);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nangular.module(_name2['default']).provider('$notification', notificationProvider);\n\nnotificationProvider.$inject = [];\n\nfunction notificationProvider() {\n  this.options = {\n    delay: 5000,\n    startTop: 20,\n    startRight: 20,\n    verticalSpacing: 10,\n    horizontalSpacing: 10,\n    positionX: 'right',\n    positionY: 'top',\n    replaceMessage: false,\n    onClose: undefined,\n    closeOnClick: true,\n    maxCount: 0, // 0 - Infinite\n    container: 'body',\n    priority: 10\n  };\n\n  this.setOptions = function (options) {\n    if (!angular.isObject(options)) throw new Error('Options should be an object!');\n    this.options = angular.extend({}, this.options, options);\n  };\n  this.$get = ['$timeout', '$http', '$compile', '$rootScope', '$injector', '$sce', '$q', '$window', function ($timeout, $http, $compile, $rootScope, $injector, $sce, $q, $window) {\n    var options = this.options;\n    var startTop = options.startTop;\n    var startRight = options.startRight;\n    var verticalSpacing = options.verticalSpacing;\n    var horizontalSpacing = options.horizontalSpacing;\n    var delay = options.delay;\n\n    var messageElements = [];\n    var isResizeBound = false;\n\n    var notify = function notify(args, t) {\n      var deferred = $q.defer();\n      if ((typeof args === 'undefined' ? 'undefined' : _typeof(args)) !== 'object' || args === null) {\n        args = {\n          message: args\n        };\n      }\n      args.scope = args.scope ? args.scope : $rootScope;\n      args.delay = !angular.isUndefined(args.delay) ? args.delay : delay;\n      args.type = t || args.type || options.type || '';\n      args.positionY = args.positionY ? args.positionY : options.positionY;\n      args.positionX = args.positionX ? args.positionX : options.positionX;\n      args.replaceMessage = args.replaceMessage ? args.replaceMessage : options.replaceMessage;\n      args.onClose = args.onClose ? args.onClose : options.onClose;\n      args.closeOnClick = args.closeOnClick !== null && args.closeOnClick !== undefined ? args.closeOnClick : options.closeOnClick;\n      args.container = args.container ? args.container : options.container;\n      args.priority = args.priority ? args.priority : options.priority;\n      processNotificationTemplate(_maNotificationTpl2['default']);\n\n      function processNotificationTemplate(template) {\n        var scope = args.scope.$new();\n        scope.message = $sce.trustAsHtml(args.message);\n        scope.title = $sce.trustAsHtml(args.title);\n        scope.nClick = args.nClick;\n        scope.t = args.type.substr(0, 1);\n        scope.delay = args.delay;\n        scope.onClose = args.onClose;\n\n        var priorityCompareTop = function priorityCompareTop(a, b) {\n          return a._priority - b._priority;\n        };\n\n        var priorityCompareBtm = function priorityCompareBtm(a, b) {\n          return b._priority - a._priority;\n        };\n\n        var reposite = function reposite() {\n          var j = 0;\n          var k = 0;\n          var lastTop = startTop;\n          var lastRight = startRight;\n          var lastPosition = [];\n          if (args.positionY === 'top') {\n            messageElements.sort(priorityCompareTop);\n          } else if (args.positionY === 'bottom') {\n            messageElements.sort(priorityCompareBtm);\n          }\n\n          for (var i = messageElements.length - 1; i >= 0; i--) {\n            var element = messageElements[i];\n            if (args.replaceMessage && i < messageElements.length - 1) {\n              element.addClass('killed');\n            } else {\n              var elHeight = parseInt(element[0].offsetHeight, 10);\n              var elWidth = parseInt(element[0].offsetWidth, 10);\n              var position = lastPosition[element._positionY + element._positionX];\n              if (top + elHeight > window.innerHeight) {\n                position = startTop;\n                k++;\n                j = 0;\n              }\n              var top;\n              if (position) {\n                if (j === 0) {\n                  top = position;\n                  lastTop = position;\n                } else {\n                  top = position + verticalSpacing;\n                  lastTop = position + verticalSpacing;\n                }\n              } else {\n                top = startTop;lastTop = startTop;\n              }\n              var right = lastRight + k * (horizontalSpacing + elWidth);\n              element.css(element._positionY, top + 'px');\n              if (element._positionX == 'center') {\n                element.css('left', parseInt(window.innerWidth / 2 - elWidth / 2, 10) + 'px');\n              } else {\n                element.css(element._positionX, right + 'px');\n              }\n              lastPosition[element._positionY + element._positionX] = top + elHeight;\n\n              if (options.maxCount > 0 && messageElements.length > options.maxCount && i === 0) {\n                element.scope().kill(true);\n              }\n              j++;\n            }\n          }\n        };\n\n        var templateElement = $compile(template)(scope);\n        templateElement._positionY = args.positionY;\n        templateElement._positionX = args.positionX;\n        templateElement._priority = args.priority;\n        templateElement.addClass(args.type);\n        var closeEvent = function closeEvent(e) {\n          e = e.originalEvent || e;\n          if (e.type === 'click' || e.propertyName === 'opacity' && e.elapsedTime >= 1) {\n            if (scope.onClose) {\n              scope.$apply(scope.onClose(templateElement));\n            }\n\n            templateElement.remove();\n            messageElements.splice(messageElements.indexOf(templateElement), 1);\n            scope.$destroy();\n            reposite();\n          }\n        };\n        angular.element(templateElement).find('a').bind('click', function () {\n          templateElement.remove();\n          messageElements.splice(messageElements.indexOf(templateElement), 1);\n          scope.$destroy();\n          reposite();\n        });\n        if (args.closeOnClick) {\n          templateElement.addClass('clickable');\n          templateElement.bind('click', closeEvent);\n        }\n        templateElement.bind('webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd', closeEvent);\n        if (angular.isNumber(args.delay)) {\n          $timeout(function () {\n            templateElement.addClass('killed');\n          }, args.delay);\n        }\n        setCssTransitions('none');\n\n        angular.element(document.querySelector(args.container)).append(templateElement);\n        var offset = -(parseInt(templateElement[0].offsetHeight, 10) + 50);\n        templateElement.css(templateElement._positionY, offset + 'px');\n        messageElements.push(templateElement);\n\n        if (args.positionX == 'center') {\n          var elWidth = parseInt(templateElement[0].offsetWidth, 10);\n          templateElement.css('left', parseInt(window.innerWidth / 2 - elWidth / 2, 10) + 'px');\n        }\n\n        $timeout(function () {\n          setCssTransitions('');\n        });\n\n        function setCssTransitions(value) {\n          ['-webkit-transition', '-o-transition', 'transition'].forEach(function (prefix) {\n            templateElement.css(prefix, value);\n          });\n        }\n\n        scope._templateElement = templateElement;\n\n        scope.kill = function (isHard) {\n          if (isHard) {\n            if (scope.onClose) {\n              scope.$apply(scope.onClose(scope._templateElement));\n            }\n\n            messageElements.splice(messageElements.indexOf(scope._templateElement), 1);\n            scope._templateElement.remove();\n            scope.$destroy();\n            $timeout(reposite);\n          } else {\n            scope._templateElement.addClass('killed');\n          }\n        };\n\n        $timeout(reposite);\n\n        if (!isResizeBound) {\n          angular.element($window).bind('resize', function (e) {\n            $timeout(reposite);\n          });\n          isResizeBound = true;\n        }\n\n        deferred.resolve(scope);\n      }\n\n      return deferred.promise;\n    };\n\n    notify.primary = function (args) {\n      return this(args, 'primary');\n    };\n    notify.error = function (args) {\n      return this(args, 'error');\n    };\n    notify.success = function (args) {\n      return this(args, 'success');\n    };\n    notify.info = function (args) {\n      return this(args, 'info');\n    };\n    notify.warning = function (args) {\n      return this(args, 'warning');\n    };\n\n    notify.clearAll = function () {\n      angular.forEach(messageElements, function (element) {\n        element.addClass('killed');\n      });\n    };\n\n    return notify;\n  }];\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/notification/src/service.js\n// module id = wrGO\n// module chunks = 24"],"sourceRoot":""}