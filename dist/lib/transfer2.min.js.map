{"version":3,"sources":["webpack:///transfer2.min.js","webpack:///./src/components/transfer2/src/maTreeTpl.html","webpack:///./src/components/transfer2/src/maTreeTransfer2Tpl.html","webpack:///./src/components/transfer2/index.js","webpack:///./src/components/transfer2/src/itemTpl.html","webpack:///./src/components/transfer2/src/name.js","webpack:///./src/components/transfer2/src/treeTransfer2Directive.js","webpack:///./src/components/transfer2/src/treeDirective.js"],"names":["webpackJsonp","7fJ5","module","exports","BWKA","e2Tx","__webpack_require__","Object","defineProperty","value","_name","_name2","obj","__esModule","default","angular","config","run","oXUz","pL48","s87f","_interopRequireDefault","maTreeTransfer2","restrict","replace","scope","data","model","maModel","valueKey","textKey","subKey","disabled","leftTitle","rightTitle","template","_maTreeTransfer2Tpl2","controllerAs","controller","$scope","$element","$attrs","updateLeftSub","updateSub","updateRightSub","direction","level0Items","_jquery2","find","level0Values","selected","$ctrl","count","len","each","this","hasClass","push","attr","forEach","d","indexOf","isSelectedChangeCheckbox","toRight","$broadcast","isNull","concat","leftSelected","rightSelected","leftCheckbox","rightCheckbox","toLeft","oldModel","getModelWidthChild","newModel","selectWithChild","getSelectedWithChild","getSub","items","length","pushSub","checkSub","sub","dd","newSelected","filterChild","subInLen","s","splice","sameCount","updateLeftRigthData","leftData","extend","rightData","getParentAndChild","get","item","cItem","_parent","searchKey","leftSub","leftButtonDisabled","rightButtonDisabled","rightSub","leftHideItems","rightShowItems","$watch","link","element","attrs","ctrl","maTextKey","maValueKey","$observe","_jquery","_maTreeTransfer2Tpl","directive","$inject","xEAJ","maTree","showItems","hideItems","_maTreeTpl2","expandMatch","doExpand","expands","arrow","contentTarget","itemCls","parent","trigger","unexpand","removeClass","newItems","_from","addClass","updateDisabled","renderContent","_templateWeb2","render","_itemTpl2","bindEvent","html","updateHideShow","parents","getParents","childs","getChilds","isObject","_parents","_childs","itemValues","getChild","toggleTree","e","target","to","froms","fromChilds","toggleClass","subStore","renderSub","insertAfter","on","checkedSub","checked","checkedParent","updateModel","prop","from","hasParentSelected","$applyAsync","ret","maCheckbox","getSubCheckedCount","total","updateTree","parentItem","treeLevel","_level","tagId","uuid","_to","_sub","it","$on","isEmpty","_templateWeb","_maTreeTpl","_itemTpl"],"mappings":"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","file":"transfer2.min.js","sourcesContent":["webpackJsonp([17],{\n\n/***/ \"7fJ5\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"ma-tree-select transition-none\\\"\\n  ng-disabled=\\\"disabled\\\">\\n  <div class=\\\"custom-multi-select form-control ui-select-container ui-select-multiple select2 select2-container select2-container-multi ng-isolate-scope ng-not-empty ng-valid custom-tree-select custom-static-select\\\">\\n\\n    <div class=\\\"ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active select2-display-none\\\">\\n      <div class=\\\"search-container select2-search\\\">\\n        <div class=\\\"ma-input ma-input-search-normal\\\"\\n          ng-disabled=\\\"disabled\\\">\\n          <input type=\\\"text\\\"\\n            autocomplete=\\\"off\\\"\\n            autocorrect=\\\"off\\\"\\n            autocapitalize=\\\"off\\\"\\n            spellcheck=\\\"false\\\"\\n            role=\\\"combobox\\\"\\n            aria-expanded=\\\"true\\\"\\n            aria-owns=\\\"ui-select-choices-0\\\"\\n            aria-label=\\\"Select box\\\"\\n            class=\\\"select2-input ui-select-search ng-pristine ng-valid ng-empty ng-touched\\\"\\n            ng-model=\\\"$ctrl.searchKey\\\"\\n            ng-disabled=\\\"disabled\\\"\\n            ondrop=\\\"return false;\\\">\\n        </div>\\n      </div>\\n      <ul tabindex=\\\"-1\\\"\\n        ng-class=\\\"{'has-search': $ctrl.searchKey}\\\"\\n        class=\\\"ui-select-choices ui-select-choices-content select2-results ng-scope\\\">\\n\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n\";\n\n/***/ }),\n\n/***/ \"BWKA\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"ma-transfer\\\">\\n  <div class=\\\"fl\\\">\\n    <div class=\\\"ma-transfer-left-result\\\">\\n      <ma-checkbox ng-disabled=\\\"disabled\\\"\\n        ng-class=\\\"{\\n          'has-sub': $ctrl.leftSub,\\n        }\\\"\\n        ng-model=\\\"$ctrl.leftCheckbox\\\">\\n      </ma-checkbox>\\n\\n      <span class=\\\"ma-transfer-title\\\">{{leftTitle || '所有'}}</span>\\n    </div>\\n    <ma-tree ng-disabled=\\\"disabled\\\"\\n      class=\\\"ma-transfer-left-tree\\\"\\n      ng-model=\\\"$ctrl.leftSelected\\\"\\n      ma-data=\\\"$ctrl.leftData\\\"\\n      ma-value-key=\\\"{{valueKey}}\\\"\\n      ma-sub-key=\\\"{{subKey}}\\\"\\n      ma-text-key=\\\"{{textKey}}\\\"\\n      ma-hide-items=\\\"$ctrl.leftHideItems\\\"></ma-tree>\\n  </div>\\n  <div class=\\\"fl ma-transfer-center\\\">\\n    <div class=\\\"mb-20\\\">\\n      <ma-button ng-disabled=\\\"$ctrl.leftButtonDisabled\\\"\\n        ma-click=\\\"$ctrl.toRight($event)\\\">\\n        <span>添加</span>\\n        <ma-icon ma-type=\\\"arrowright\\\"></ma-icon>\\n      </ma-button>\\n    </div>\\n    <div>\\n      <ma-button ng-disabled=\\\"$ctrl.rightButtonDisabled\\\"\\n        ma-click=\\\"$ctrl.toLeft($event)\\\">\\n        <ma-icon ma-type=\\\"arrowleft\\\"></ma-icon>\\n        <span>删除</span>\\n      </ma-button>\\n    </div>\\n  </div>\\n  <div class=\\\"fl\\\">\\n    <div class=\\\"ma-transfer-right-result\\\">\\n      <ma-checkbox ng-disabled=\\\"disabled\\\"\\n        ng-class=\\\"{\\n          'has-sub': $ctrl.rightSub,\\n        }\\\"\\n        ng-model=\\\"$ctrl.rightCheckbox\\\">\\n      </ma-checkbox>\\n\\n      <span class=\\\"ma-transfer-title\\\">{{rightTitle || '选中'}}</span>\\n    </div>\\n    <ma-tree ng-disabled=\\\"disabled\\\"\\n      class=\\\"ma-transfer-right-tree\\\"\\n      ng-model=\\\"$ctrl.rightSelected\\\"\\n      ma-data=\\\"$ctrl.rightData\\\"\\n      ma-value-key=\\\"{{valueKey}}\\\"\\n      ma-sub-key=\\\"{{subKey}}\\\"\\n      ma-text-key=\\\"{{textKey}}\\\"\\n      ma-show-items=\\\"$ctrl.rightShowItems\\\"></ma-tree>\\n  </div>\\n</div>\\n\";\n\n/***/ }),\n\n/***/ \"e2Tx\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _name = __webpack_require__(\"pL48\");\n\nvar _name2 = _interopRequireDefault(_name);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nangular.module(_name2['default'], []).config(function () {}).run(function () {});\n\n__webpack_require__(\"xEAJ\");\n__webpack_require__(\"s87f\");\n\nexports['default'] = _name2['default'];\n\n/***/ }),\n\n/***/ \"oXUz\":\n/***/ (function(module, exports) {\n\nmodule.exports = \" {{each data}}\\n {{if !$value._parent || renderSub}}\\n<li class=\\\"ui-select-choices-row tree-level-{{$value._level}} {{$value._sub ? 'has-sub': ''}}\\\"\\n  data-value=\\\"{{$value[valueKey]}}\\\"\\n  data-from=\\\"{{$value._from}}\\\"\\n  data-to=\\\"{{$value._to}}\\\">\\n  <div class=\\\"select2-result-label ui-select-choices-row-inner\\\">\\n    <div>\\n      {{if $value._sub}}\\n      <i class=\\\"tree-arrow-click\\\">\\n        <i class=\\\"tree-arrow\\\"></i>\\n      </i>\\n      {{/if}}\\n      <!-- <div class=\\\"click-mask\\\"></div> -->\\n      <label class=\\\"ma-checkbox\\\">\\n        <input type=\\\"checkbox\\\" />\\n        <i class=\\\"ma-checkbox-appearance\\\"></i>\\n        <span>{{$value[textKey]}}</span>\\n      </label>\\n    </div>\\n  </div>\\n</li>\\n{{/if}}\\n{{/each}}\\n\";\n\n/***/ }),\n\n/***/ \"pL48\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports['default'] = 'meetyou.angular.ui.transfer2';\n\n/***/ }),\n\n/***/ \"s87f\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _name = __webpack_require__(\"pL48\");\n\nvar _name2 = _interopRequireDefault(_name);\n\nvar _jquery = __webpack_require__(\"7t+N\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _maTreeTransfer2Tpl = __webpack_require__(\"BWKA\");\n\nvar _maTreeTransfer2Tpl2 = _interopRequireDefault(_maTreeTransfer2Tpl);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nangular.module(_name2['default']).directive('maTreeTransfer2', maTreeTransfer2);\n\nmaTreeTransfer2.$inject = [];\n\nfunction maTreeTransfer2() {\n  return {\n    restrict: 'E',\n    replace: true,\n    scope: {\n      data: '=maData',\n      model: '=ngModel',\n      maModel: '=maModel',\n      valueKey: '@maValueKey',\n      textKey: '@maTextKey',\n      subKey: '@maSubKey',\n      disabled: '=ngDisabled',\n\n      leftTitle: '@maLeftTitle',\n      rightTitle: '@maRightTitle'\n    },\n    template: _maTreeTransfer2Tpl2['default'],\n    controllerAs: '$ctrl',\n    controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n      var $ctrl = this;\n\n      $ctrl.searchKey = '';\n\n      $ctrl.leftSub = false;\n      $ctrl.leftCheckbox = false;\n\n      $ctrl.leftButtonDisabled = true;\n      $ctrl.rightButtonDisabled = true;\n\n      $ctrl.rightSub = false;\n      $ctrl.rightCheckbox = false;\n\n      $ctrl.toRight = toRight;\n      $ctrl.toLeft = toLeft;\n\n      $ctrl.leftSelected = [];\n      $ctrl.rightSelected = [];\n\n      $ctrl.leftData = [];\n      $ctrl.rightData = [];\n\n      $ctrl.leftHideItems = [];\n      $ctrl.rightShowItems = [];\n\n      $scope.$watch('data', function (d) {\n        // console.log('transfer2 data', d);\n        updateLeftRigthData();\n      });\n\n      $scope.$watch('model', function (d) {\n        console.log('transfer2 model', d);\n\n        // 过滤掉父子同在\n        var newModel = filterChild();\n\n        if (newModel) {\n          $scope.model = newModel;\n          return;\n        }\n\n        $ctrl.leftHideItems = d || [];\n        $ctrl.rightShowItems = d || [];\n\n        if ($attrs.maModel) {\n          $scope.maModel = getParentAndChild(d);\n        }\n      });\n\n      $scope.$watch('$ctrl.leftCheckbox', function (d) {\n        if ($scope.isSelectedChangeCheckbox) {\n          $scope.isSelectedChangeCheckbox = false;\n          return;\n        }\n\n        if (d === true) {\n          $ctrl.leftSelected = 'all';\n        }\n        if (d === false) {\n          $ctrl.leftSelected = [];\n        }\n      });\n\n      $scope.$watch('$ctrl.rightCheckbox', function (d) {\n        if ($scope.isSelectedChangeCheckbox) {\n          $scope.isSelectedChangeCheckbox = false;\n          return;\n        }\n\n        if (d === true) {\n          $ctrl.rightSelected = 'all';\n        }\n        if (d === false) {\n          $ctrl.rightSelected = [];\n        }\n      });\n\n      $scope.$watch('$ctrl.leftSelected', function (d) {\n        $ctrl.leftButtonDisabled = !(d && d.length);\n        updateLeftSub();\n      });\n\n      $scope.$watch('$ctrl.rightSelected', function (d) {\n        $ctrl.rightButtonDisabled = !(d && d.length);\n        updateRightSub();\n      });\n\n      function updateLeftSub() {\n        updateSub('left');\n      }\n\n      function updateRightSub() {\n        updateSub('right');\n      }\n\n      function updateSub(direction) {\n        var level0Items = (0, _jquery2['default'])($element).find('.ma-transfer-' + direction + '-tree.ma-tree-select .tree-level-0');\n        var level0Values = [];\n        var selected = $ctrl[direction + 'Selected'] || [];\n        var count = 0;\n        var len = 0;\n\n        level0Items.each(function () {\n          if (!(0, _jquery2['default'])(this).hasClass('hidden')) {\n            level0Values.push((0, _jquery2['default'])(this).attr('data-value'));\n          }\n        });\n\n        level0Values.forEach(function (d) {\n          if (selected.indexOf(d) !== -1) {\n            count++;\n          }\n          len++;\n        });\n\n        if (len > 0) {\n          if (count > 0 && count < len) {\n            $ctrl[direction + 'Sub'] = true;\n          } else {\n            $ctrl[direction + 'Sub'] = false;\n          }\n          if (count === len) {\n            if ($ctrl[direction + 'Checkbox'] === false) {\n              $ctrl[direction + 'Checkbox'] = true;\n              $scope.isSelectedChangeCheckbox = true;\n            }\n          } else if ($ctrl[direction + 'Checkbox'] === true) {\n            $ctrl[direction + 'Checkbox'] = false;\n            $scope.isSelectedChangeCheckbox = true;\n          }\n        }\n      }\n\n      function toRight() {\n        $scope.$broadcast('search.clear');\n        if (angular.isNull($scope.model)) {\n          $scope.model = [];\n        }\n        $scope.model = $scope.model.concat($ctrl.leftSelected);\n        $ctrl.leftSelected = [];\n        $ctrl.rightSelected = [];\n        $ctrl.leftCheckbox = false;\n        $ctrl.rightCheckbox = false;\n      }\n\n      function toLeft() {\n        $scope.$broadcast('search.clear');\n        if (angular.isNull($scope.model)) {\n          $scope.model = [];\n        }\n        var oldModel = getModelWidthChild();\n        var newModel = [];\n        var selectWithChild = getSelectedWithChild();\n\n        angular.each(oldModel, function (d) {\n          if (selectWithChild.indexOf(d) === -1) {\n            newModel.push(d);\n          }\n        });\n\n        $scope.model = newModel;\n        $ctrl.leftSelected = [];\n        $ctrl.rightSelected = [];\n        $ctrl.leftCheckbox = false;\n        $ctrl.rightCheckbox = false;\n      }\n\n      function getModelWidthChild() {\n        var model = $scope.model || [];\n        var newModel = [];\n\n        function getSub(items) {\n          angular.each(items, function (d) {\n            if (model.indexOf(d[$scope.valueKey] + '') !== -1) {\n              if (d[$scope.subKey] && d[$scope.subKey].length) {\n                pushSub(d[$scope.subKey]);\n              } else {\n                newModel.push(d[$scope.valueKey] + '');\n              }\n            } else {\n              getSub(d[$scope.subKey]);\n            }\n          });\n        }\n\n        function pushSub(items) {\n          angular.each(items, function (d) {\n            if (d[$scope.subKey] && d[$scope.subKey].length) {\n              pushSub(d[$scope.subKey]);\n            } else {\n              newModel.push(d[$scope.valueKey] + '');\n            }\n          });\n        }\n\n        getSub($scope.data);\n\n        return newModel;\n      }\n\n      function getSelectedWithChild() {\n        var newSelected = [];\n        var selected = $ctrl.rightSelected || [];\n\n        function checkSub(items) {\n          angular.each(items, function (d) {\n            var sub = d[$scope.subKey];\n            if (selected.indexOf(d[$scope.valueKey] + '') !== -1 && sub && sub.length) {\n              pushSub(sub);\n            } else if (sub && sub.length) {\n              checkSub(sub);\n            }\n          });\n        }\n\n        function pushSub(sub) {\n          angular.each(sub, function (dd) {\n            newSelected.push(dd[$scope.valueKey] + '');\n            if (dd[$scope.subKey] && dd[$scope.subKey].length) {\n              pushSub(dd[$scope.subKey]);\n            }\n          });\n        }\n\n        checkSub($scope.data);\n\n        return selected.concat(newSelected);\n      }\n\n      function filterChild() {\n        var selected = $scope.model || [];\n        var newModel = [];\n        var splicedArray = [];\n        var sameCount = 0;\n\n        function checkSub(items) {\n          var subInLen = 0;\n          angular.forEach(items, function (d) {\n            if (selected.indexOf(d[$scope.valueKey] + '') !== -1) {\n              newModel.push(d[$scope.valueKey] + '');\n              subInLen++;\n            } else {\n              var sub = d[$scope.subKey];\n              if (sub && sub.length) {\n                var _subInLen = checkSub(sub);\n                // 如果子全部在，就只存在父级\n                if (_subInLen >= sub.length) {\n                  newModel.push(d[$scope.valueKey] + '');\n                  angular.each(sub, function (s) {\n                    if (newModel.indexOf(s[$scope.valueKey] + '') !== -1) {\n                      newModel.splice(newModel.indexOf(s[$scope.valueKey] + ''), 1);\n                    }\n                  });\n                }\n              }\n            }\n          });\n          return subInLen;\n        }\n\n        checkSub($scope.data);\n\n        newModel.forEach(function (d) {\n          if (selected.indexOf(d) !== -1) {\n            sameCount++;\n          }\n        });\n\n        return sameCount < selected.length ? newModel : false;\n      }\n\n      function updateLeftRigthData() {\n        var leftData = _jquery2['default'].extend(true, [], $scope.data);\n        var rightData = _jquery2['default'].extend(true, [], $scope.data);\n\n        $ctrl.leftData = leftData;\n        $ctrl.rightData = rightData;\n      }\n\n      function getParentAndChild(selected) {\n        var newSelected = [];\n\n        function get(items) {\n          angular.each(items, function (item) {\n            if (selected.indexOf(item[$scope.valueKey] + '') !== -1) {\n              var cItem = item;\n\n              newSelected.push(item[$scope.valueKey] + '');\n\n              while (cItem._parent) {\n                if (newSelected.indexOf(cItem._parent[$scope.valueKey] + '') === -1) {\n                  newSelected.push(cItem._parent[$scope.valueKey] + '');\n                }\n                cItem = cItem._parent;\n              }\n\n              getSub(item[$scope.subKey]);\n            }\n\n            if (item[$scope.subKey] && item[$scope.subKey].length) {\n              get(item[$scope.subKey]);\n            }\n          });\n        }\n\n        function getSub(sub) {\n          if (sub && sub.length) {\n            angular.each(sub, function (item) {\n              newSelected.push(item[$scope.valueKey] + '');\n              getSub(item[$scope.subKey]);\n            });\n          }\n        }\n\n        get($ctrl.leftData);\n\n        return newSelected;\n      }\n    }],\n    link: function link(scope, element, attrs, ctrl) {\n      scope.textKey = attrs.maTextKey || 'text';\n      scope.valueKey = attrs.maValueKey || 'value';\n\n      attrs.$observe('maTextKey', function (d) {\n        scope.textKey = d || 'text';\n      });\n      attrs.$observe('maValueKey', function (d) {\n        scope.valueKey = d || 'value';\n      });\n    }\n  };\n}\n\n/***/ }),\n\n/***/ \"xEAJ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _name = __webpack_require__(\"pL48\");\n\nvar _name2 = _interopRequireDefault(_name);\n\nvar _templateWeb = __webpack_require__(\"H+C6\");\n\nvar _templateWeb2 = _interopRequireDefault(_templateWeb);\n\nvar _jquery = __webpack_require__(\"7t+N\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _maTreeTpl = __webpack_require__(\"7fJ5\");\n\nvar _maTreeTpl2 = _interopRequireDefault(_maTreeTpl);\n\nvar _itemTpl = __webpack_require__(\"oXUz\");\n\nvar _itemTpl2 = _interopRequireDefault(_itemTpl);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nangular.module(_name2['default']).directive('maTree', maTree);\n\nmaTree.$inject = [];\n\nfunction maTree() {\n  return {\n    restrict: 'E',\n    replace: true,\n    scope: {\n      data: '=maData',\n      model: '=ngModel',\n      valueKey: '@maValueKey',\n      textKey: '@maTextKey',\n      subKey: '@maSubKey',\n      disabled: '=ngDisabled',\n\n      showItems: '=maShowItems',\n      hideItems: '=maHideItems'\n    },\n    template: _maTreeTpl2['default'],\n    controllerAs: '$ctrl',\n    controller: ['$scope', '$element', function ($scope, $element) {\n      var $ctrl = this;\n      var contentTarget = (0, _jquery2['default'])($element).find('.ui-select-choices-content');\n      var itemCls = '.ui-select-choices-row';\n      var subStore = {};\n\n      $ctrl.searchKey = '';\n\n      $scope.$on('search.clear', function () {\n        $ctrl.searchKey = '';\n      });\n\n      $scope.$watch('$ctrl.searchKey', function (d) {\n        expandMatch(d);\n      });\n      $scope.$watch('disabled', updateDisabled);\n\n      $scope.$watch('data', function (d) {\n        var items = updateTree(d);\n\n        $scope.newItems = items;\n        renderContent(items);\n      });\n\n      $scope.$watch('showItems', function (d) {\n        // console.log('show items', d);\n        if (d) {\n          updateHideShow();\n        }\n      });\n      $scope.$watch('hideItems', function (d) {\n        // console.log('hide items', d);\n        if (d) {\n          updateHideShow();\n        }\n      });\n\n      $scope.$watch('model', function (d) {\n        // console.log('tree model', d);\n\n        // 全不选\n        if (angular.isEmpty(d)) {\n          contentTarget.find(itemCls).each(function () {\n            // if (!$(this).hasClass('hidden')) {\n            (0, _jquery2['default'])(this).find('input').prop('checked', false);\n            // }\n          });\n          contentTarget.find('.ma-checkbox').removeClass('has-sub');\n        }\n\n        // 全选\n        if (d === 'all') {\n          var newModel = [];\n          contentTarget.find(itemCls).each(function () {\n            if (!(0, _jquery2['default'])(this).hasClass('hidden')) {\n              (0, _jquery2['default'])(this).find('input').prop('checked', true);\n              newModel.push((0, _jquery2['default'])(this).attr('data-value'));\n            }\n          });\n          contentTarget.find('.ma-checkbox').removeClass('has-sub');\n\n          $scope.model = newModel;\n        }\n      });\n\n      function expandMatch(searchKey) {\n        contentTarget.find('.search-match').removeClass('search-match');\n        if (angular.isNull(searchKey)) {\n          return;\n        }\n\n        var expands = [];\n        var unexpand = [];\n\n        $scope.newItems.forEach(function (d) {\n          var item = d;\n\n          if ((item[$scope.textKey] + '').indexOf(searchKey) !== -1 && item._from) {\n            expands.push(item._from);\n            while (item._parent && item._parent._from) {\n              expands.push(item._parent._from);\n              item = item._parent;\n            }\n          }\n        });\n\n        function doExpand() {\n          expands.forEach(function (d) {\n            var arrow = contentTarget.find(itemCls + '[data-to=\"' + d + '\"] .tree-arrow-click');\n\n            if (arrow.length) {\n              if (!arrow.parent().hasClass('tree-open')) {\n                arrow.trigger('click');\n              }\n            } else {\n              unexpand.push(d);\n            }\n          });\n          expands = unexpand;\n          unexpand = [];\n          if (expands.length) {\n            doExpand();\n          }\n        }\n\n        doExpand();\n\n        // 设置match class\n        $scope.newItems.forEach(function (d) {\n          if ((d[$scope.textKey] + '').indexOf(searchKey) !== -1) {\n            contentTarget.find(itemCls + '[data-value=\"' + (d[$scope.valueKey] + '') + '\"]').addClass('search-match');\n          }\n        });\n      }\n\n      function updateDisabled() {\n        if ($scope.disabled) {\n          contentTarget.find('input, .ma-checkbox').attr('disabled', true);\n        } else {\n          contentTarget.find('input, .ma-checkbox').attr('disabled', false);\n        }\n      }\n\n      function renderContent(data) {\n        var items = (0, _jquery2['default'])(_templateWeb2['default'].render(_itemTpl2['default'], {\n          data: data,\n          textKey: $scope.textKey,\n          valueKey: $scope.valueKey\n        }));\n\n        bindEvent(items);\n\n        contentTarget.html(items);\n\n        updateHideShow();\n      }\n\n      function updateHideShow() {\n        // 如果有要隐藏的隐藏\n        if ($scope.hideItems) {\n          var parents = getParents($scope.hideItems);\n          var childs = getChilds($scope.hideItems);\n\n          contentTarget.find(itemCls).removeClass('hidden');\n          $scope.hideItems.forEach(function (d) {\n            var value = angular.isObject(d) ? d[$scope.valueKey] + '' : d;\n            var item = contentTarget.find(itemCls + '[data-value=\"' + value + '\"]');\n            item.addClass('hidden');\n          });\n          childs.forEach(function (d) {\n            contentTarget.find(itemCls + '[data-value=\"' + d + '\"]').addClass('hidden');\n          });\n          parents.forEach(function (d) {\n            contentTarget.find(itemCls + '[data-value=\"' + d + '\"]').removeClass('hidden');\n          });\n        }\n\n        // 如果有要现实的显示\n        if ($scope.showItems) {\n          var _parents = getParents($scope.showItems);\n          var _childs = getChilds($scope.showItems);\n\n          contentTarget.find(itemCls).addClass('hidden');\n\n          $scope.showItems.forEach(function (d) {\n            var value = angular.isObject(d) ? d[$scope.valueKey] + '' : d;\n            var item = contentTarget.find(itemCls + '[data-value=\"' + value + '\"]');\n\n            item.removeClass('hidden');\n          });\n\n          _parents.concat(_childs).forEach(function (d) {\n            contentTarget.find(itemCls + '[data-value=\"' + d + '\"]').removeClass('hidden');\n          });\n        }\n      }\n\n      function getChilds(itemValues) {\n        var childs = [];\n        angular.each($scope.newItems, function (d) {\n          if (itemValues.indexOf(d[$scope.valueKey] + '') !== -1) {\n            getChild(d);\n          }\n        });\n\n        function getChild(item) {\n          var sub = item[$scope.subKey];\n          if (sub && sub.length) {\n            sub.forEach(function (d) {\n              childs.push(d[$scope.valueKey] + '');\n              getChild(d);\n            });\n          }\n        }\n        return childs;\n      }\n\n      function getParents(itemValues) {\n        var parents = [];\n        angular.each($scope.newItems, function (d) {\n          if (itemValues.indexOf(d[$scope.valueKey] + '') !== -1) {\n            var item = d;\n            while (item._parent) {\n              parents.push(item._parent[$scope.valueKey] + '');\n              item = item._parent;\n            }\n          }\n        });\n        return parents;\n      }\n\n      function toggleTree(e) {\n        if ($scope.disabled) {\n          return;\n        }\n\n        var target = (0, _jquery2['default'])(e.target);\n        var item = target.parents(itemCls);\n        var to = item.attr('data-to');\n        var froms = contentTarget.find(itemCls + '[data-from=\"' + to + '\"]');\n        var fromChilds = contentTarget.find(itemCls + '[data-from*=\"' + to + '_\"]');\n\n        if (!froms.length) {\n          froms = (0, _jquery2['default'])(_templateWeb2['default'].render(_itemTpl2['default'], {\n            data: subStore[to],\n            textKey: $scope.textKey,\n            valueKey: $scope.valueKey,\n            renderSub: true\n          }));\n          froms.insertAfter(item);\n          bindEvent(froms, item);\n          updateHideShow();\n        } else {\n          froms.toggleClass('hide');\n          fromChilds.toggleClass('child-hide');\n        }\n        target.parent().toggleClass('tree-open');\n      }\n\n      function bindEvent(items, parent) {\n        items.find('.tree-arrow-click').on('click', toggleTree);\n        items.find('input[type=\"checkbox\"]').on('change', function (e) {\n          checkedSub((0, _jquery2['default'])(e.target).parents(itemCls).attr('data-to'), e.target.checked);\n          checkedParent((0, _jquery2['default'])(e.target).parents(itemCls).attr('data-from'), e.target.checked);\n          updateModel();\n        });\n        if (parent) {\n          checkedSub(parent.attr('data-to'), parent.find('input').prop('checked'));\n        }\n        updateDisabled();\n      }\n\n      function updateModel() {\n        // console.log('update model');\n        var newModel = [];\n        var selectedes = contentTarget.find('input:checked');\n\n        selectedes.each(function () {\n          var item = (0, _jquery2['default'])(this).parents(itemCls);\n          var from = item.attr('data-from');\n          var parent = contentTarget.find(itemCls + '[data-to=\"' + from + '\"]');\n          var parentValue = parent.attr('data-value');\n\n          if (hasParentSelected(item)) {\n            return true;\n          }\n          newModel.push(item.attr('data-value'));\n          return true;\n        });\n\n        $scope.$applyAsync(function () {\n          $scope.model = newModel;\n        });\n      }\n\n      function hasParentSelected(item) {\n        var from = item.attr('data-from');\n        var parent = contentTarget.find(itemCls + '[data-to=\"' + from + '\"]');\n        var ret = false;\n\n        ret = !!(from && parent.length && parent.find('input').prop('checked'));\n\n        if (ret === false && from && parent.attr('data-from')) {\n          ret = hasParentSelected(parent);\n        }\n\n        return ret;\n      }\n\n      function checkedSub(to, checked) {\n        if (to) {\n          var items = contentTarget.find(itemCls + '[data-from=\"' + to + '\"]');\n          var item = contentTarget.find(itemCls + '[data-to=\"' + to + '\"]');\n\n          items.each(function () {\n            if (!(0, _jquery2['default'])(this).hasClass('hidden')) {\n              (0, _jquery2['default'])(this).find('input').prop('checked', checked);\n              checkedSub((0, _jquery2['default'])(this).attr('data-to'), checked);\n            }\n          });\n          item.find('.ma-checkbox').removeClass('has-sub');\n        }\n      }\n\n      function checkedParent(from) {\n        if (from) {\n          var items = contentTarget.find(itemCls + '[data-to=\"' + from + '\"]');\n          var maCheckbox = items.find('.ma-checkbox');\n          var data = getSubCheckedCount(from);\n\n          maCheckbox.removeClass('has-sub');\n          if (data.count <= 0) {\n            items.find('input').prop('checked', false);\n            if (data.sub) {\n              maCheckbox.addClass('has-sub');\n            }\n          } else if (data.count >= data.total) {\n            items.find('input').prop('checked', true);\n          } else {\n            items.find('input').prop('checked', false);\n            maCheckbox.addClass('has-sub');\n          }\n\n          checkedParent(items.attr('data-from'));\n        }\n      }\n\n      function getSubCheckedCount(from) {\n        var items = contentTarget.find(itemCls + '[data-from=\"' + from + '\"]');\n        var count = 0;\n        var total = 0;\n        var sub = 0;\n\n        items.each(function () {\n          if (!(0, _jquery2['default'])(this).hasClass('hidden')) {\n            if ((0, _jquery2['default'])(this).find('input').prop('checked')) {\n              count++;\n            }\n            if ((0, _jquery2['default'])(this).find('.ma-checkbox').hasClass('has-sub')) {\n              sub++;\n            }\n            total++;\n          }\n        });\n        return {\n          total: total,\n          count: count,\n          sub: sub\n        };\n      }\n\n      function updateTree(items) {\n        var newItems = [];\n        var subKey = $scope.subKey;\n\n        subStore = {};\n\n        function getSub(items, parentItem, treeLevel) {\n          angular.each(items, function (d) {\n            var item = d;\n\n            newItems.push(item);\n\n            item._level = treeLevel;\n\n            if (item[subKey] && item[subKey].length) {\n              item.tagId = parentItem ? parentItem.tagId + '_' + angular.uuid() : 'tag_' + angular.uuid();\n              item._to = item.tagId;\n              item._sub = true;\n              subStore[item.tagId] = item[subKey];\n              angular.forEach(item[subKey], function (it) {\n                it._parent = item;\n                it._from = item.tagId;\n              });\n              getSub(item[subKey], item, treeLevel + 1);\n            }\n          });\n        }\n        getSub(items, null, 0);\n        return newItems;\n      }\n    }],\n    link: function link(scope, element, attrs, ctrl) {\n      scope.textKey = attrs.maTextKey || 'text';\n      scope.valueKey = attrs.maValueKey || 'value';\n\n      attrs.$observe('maTextKey', function (d) {\n        scope.textKey = d || 'text';\n      });\n      attrs.$observe('maValueKey', function (d) {\n        scope.valueKey = d || 'value';\n      });\n    }\n  };\n}\n\n/***/ })\n\n},[\"e2Tx\"]);\n\n\n// WEBPACK FOOTER //\n// transfer2.min.js","module.exports = \"<div class=\\\"ma-tree-select transition-none\\\"\\n  ng-disabled=\\\"disabled\\\">\\n  <div class=\\\"custom-multi-select form-control ui-select-container ui-select-multiple select2 select2-container select2-container-multi ng-isolate-scope ng-not-empty ng-valid custom-tree-select custom-static-select\\\">\\n\\n    <div class=\\\"ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active select2-display-none\\\">\\n      <div class=\\\"search-container select2-search\\\">\\n        <div class=\\\"ma-input ma-input-search-normal\\\"\\n          ng-disabled=\\\"disabled\\\">\\n          <input type=\\\"text\\\"\\n            autocomplete=\\\"off\\\"\\n            autocorrect=\\\"off\\\"\\n            autocapitalize=\\\"off\\\"\\n            spellcheck=\\\"false\\\"\\n            role=\\\"combobox\\\"\\n            aria-expanded=\\\"true\\\"\\n            aria-owns=\\\"ui-select-choices-0\\\"\\n            aria-label=\\\"Select box\\\"\\n            class=\\\"select2-input ui-select-search ng-pristine ng-valid ng-empty ng-touched\\\"\\n            ng-model=\\\"$ctrl.searchKey\\\"\\n            ng-disabled=\\\"disabled\\\"\\n            ondrop=\\\"return false;\\\">\\n        </div>\\n      </div>\\n      <ul tabindex=\\\"-1\\\"\\n        ng-class=\\\"{'has-search': $ctrl.searchKey}\\\"\\n        class=\\\"ui-select-choices ui-select-choices-content select2-results ng-scope\\\">\\n\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/transfer2/src/maTreeTpl.html\n// module id = 7fJ5\n// module chunks = 17","module.exports = \"<div class=\\\"ma-transfer\\\">\\n  <div class=\\\"fl\\\">\\n    <div class=\\\"ma-transfer-left-result\\\">\\n      <ma-checkbox ng-disabled=\\\"disabled\\\"\\n        ng-class=\\\"{\\n          'has-sub': $ctrl.leftSub,\\n        }\\\"\\n        ng-model=\\\"$ctrl.leftCheckbox\\\">\\n      </ma-checkbox>\\n\\n      <span class=\\\"ma-transfer-title\\\">{{leftTitle || '所有'}}</span>\\n    </div>\\n    <ma-tree ng-disabled=\\\"disabled\\\"\\n      class=\\\"ma-transfer-left-tree\\\"\\n      ng-model=\\\"$ctrl.leftSelected\\\"\\n      ma-data=\\\"$ctrl.leftData\\\"\\n      ma-value-key=\\\"{{valueKey}}\\\"\\n      ma-sub-key=\\\"{{subKey}}\\\"\\n      ma-text-key=\\\"{{textKey}}\\\"\\n      ma-hide-items=\\\"$ctrl.leftHideItems\\\"></ma-tree>\\n  </div>\\n  <div class=\\\"fl ma-transfer-center\\\">\\n    <div class=\\\"mb-20\\\">\\n      <ma-button ng-disabled=\\\"$ctrl.leftButtonDisabled\\\"\\n        ma-click=\\\"$ctrl.toRight($event)\\\">\\n        <span>添加</span>\\n        <ma-icon ma-type=\\\"arrowright\\\"></ma-icon>\\n      </ma-button>\\n    </div>\\n    <div>\\n      <ma-button ng-disabled=\\\"$ctrl.rightButtonDisabled\\\"\\n        ma-click=\\\"$ctrl.toLeft($event)\\\">\\n        <ma-icon ma-type=\\\"arrowleft\\\"></ma-icon>\\n        <span>删除</span>\\n      </ma-button>\\n    </div>\\n  </div>\\n  <div class=\\\"fl\\\">\\n    <div class=\\\"ma-transfer-right-result\\\">\\n      <ma-checkbox ng-disabled=\\\"disabled\\\"\\n        ng-class=\\\"{\\n          'has-sub': $ctrl.rightSub,\\n        }\\\"\\n        ng-model=\\\"$ctrl.rightCheckbox\\\">\\n      </ma-checkbox>\\n\\n      <span class=\\\"ma-transfer-title\\\">{{rightTitle || '选中'}}</span>\\n    </div>\\n    <ma-tree ng-disabled=\\\"disabled\\\"\\n      class=\\\"ma-transfer-right-tree\\\"\\n      ng-model=\\\"$ctrl.rightSelected\\\"\\n      ma-data=\\\"$ctrl.rightData\\\"\\n      ma-value-key=\\\"{{valueKey}}\\\"\\n      ma-sub-key=\\\"{{subKey}}\\\"\\n      ma-text-key=\\\"{{textKey}}\\\"\\n      ma-show-items=\\\"$ctrl.rightShowItems\\\"></ma-tree>\\n  </div>\\n</div>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/transfer2/src/maTreeTransfer2Tpl.html\n// module id = BWKA\n// module chunks = 17","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _name = require('./src/name.js');\n\nvar _name2 = _interopRequireDefault(_name);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nangular.module(_name2['default'], []).config(function () {}).run(function () {});\n\nrequire('./src/treeDirective.js');\nrequire('./src/treeTransfer2Directive.js');\n\nexports['default'] = _name2['default'];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/transfer2/index.js\n// module id = e2Tx\n// module chunks = 17","module.exports = \" {{each data}}\\n {{if !$value._parent || renderSub}}\\n<li class=\\\"ui-select-choices-row tree-level-{{$value._level}} {{$value._sub ? 'has-sub': ''}}\\\"\\n  data-value=\\\"{{$value[valueKey]}}\\\"\\n  data-from=\\\"{{$value._from}}\\\"\\n  data-to=\\\"{{$value._to}}\\\">\\n  <div class=\\\"select2-result-label ui-select-choices-row-inner\\\">\\n    <div>\\n      {{if $value._sub}}\\n      <i class=\\\"tree-arrow-click\\\">\\n        <i class=\\\"tree-arrow\\\"></i>\\n      </i>\\n      {{/if}}\\n      <!-- <div class=\\\"click-mask\\\"></div> -->\\n      <label class=\\\"ma-checkbox\\\">\\n        <input type=\\\"checkbox\\\" />\\n        <i class=\\\"ma-checkbox-appearance\\\"></i>\\n        <span>{{$value[textKey]}}</span>\\n      </label>\\n    </div>\\n  </div>\\n</li>\\n{{/if}}\\n{{/each}}\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/transfer2/src/itemTpl.html\n// module id = oXUz\n// module chunks = 17","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports['default'] = 'meetyou.angular.ui.transfer2';\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/transfer2/src/name.js\n// module id = pL48\n// module chunks = 17","'use strict';\n\nvar _name = require('./name.js');\n\nvar _name2 = _interopRequireDefault(_name);\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _maTreeTransfer2Tpl = require('./maTreeTransfer2Tpl.html');\n\nvar _maTreeTransfer2Tpl2 = _interopRequireDefault(_maTreeTransfer2Tpl);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nangular.module(_name2['default']).directive('maTreeTransfer2', maTreeTransfer2);\n\nmaTreeTransfer2.$inject = [];\n\nfunction maTreeTransfer2() {\n  return {\n    restrict: 'E',\n    replace: true,\n    scope: {\n      data: '=maData',\n      model: '=ngModel',\n      maModel: '=maModel',\n      valueKey: '@maValueKey',\n      textKey: '@maTextKey',\n      subKey: '@maSubKey',\n      disabled: '=ngDisabled',\n\n      leftTitle: '@maLeftTitle',\n      rightTitle: '@maRightTitle'\n    },\n    template: _maTreeTransfer2Tpl2['default'],\n    controllerAs: '$ctrl',\n    controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n      var $ctrl = this;\n\n      $ctrl.searchKey = '';\n\n      $ctrl.leftSub = false;\n      $ctrl.leftCheckbox = false;\n\n      $ctrl.leftButtonDisabled = true;\n      $ctrl.rightButtonDisabled = true;\n\n      $ctrl.rightSub = false;\n      $ctrl.rightCheckbox = false;\n\n      $ctrl.toRight = toRight;\n      $ctrl.toLeft = toLeft;\n\n      $ctrl.leftSelected = [];\n      $ctrl.rightSelected = [];\n\n      $ctrl.leftData = [];\n      $ctrl.rightData = [];\n\n      $ctrl.leftHideItems = [];\n      $ctrl.rightShowItems = [];\n\n      $scope.$watch('data', function (d) {\n        // console.log('transfer2 data', d);\n        updateLeftRigthData();\n      });\n\n      $scope.$watch('model', function (d) {\n        console.log('transfer2 model', d);\n\n        // 过滤掉父子同在\n        var newModel = filterChild();\n\n        if (newModel) {\n          $scope.model = newModel;\n          return;\n        }\n\n        $ctrl.leftHideItems = d || [];\n        $ctrl.rightShowItems = d || [];\n\n        if ($attrs.maModel) {\n          $scope.maModel = getParentAndChild(d);\n        }\n      });\n\n      $scope.$watch('$ctrl.leftCheckbox', function (d) {\n        if ($scope.isSelectedChangeCheckbox) {\n          $scope.isSelectedChangeCheckbox = false;\n          return;\n        }\n\n        if (d === true) {\n          $ctrl.leftSelected = 'all';\n        }\n        if (d === false) {\n          $ctrl.leftSelected = [];\n        }\n      });\n\n      $scope.$watch('$ctrl.rightCheckbox', function (d) {\n        if ($scope.isSelectedChangeCheckbox) {\n          $scope.isSelectedChangeCheckbox = false;\n          return;\n        }\n\n        if (d === true) {\n          $ctrl.rightSelected = 'all';\n        }\n        if (d === false) {\n          $ctrl.rightSelected = [];\n        }\n      });\n\n      $scope.$watch('$ctrl.leftSelected', function (d) {\n        $ctrl.leftButtonDisabled = !(d && d.length);\n        updateLeftSub();\n      });\n\n      $scope.$watch('$ctrl.rightSelected', function (d) {\n        $ctrl.rightButtonDisabled = !(d && d.length);\n        updateRightSub();\n      });\n\n      function updateLeftSub() {\n        updateSub('left');\n      }\n\n      function updateRightSub() {\n        updateSub('right');\n      }\n\n      function updateSub(direction) {\n        var level0Items = (0, _jquery2['default'])($element).find('.ma-transfer-' + direction + '-tree.ma-tree-select .tree-level-0');\n        var level0Values = [];\n        var selected = $ctrl[direction + 'Selected'] || [];\n        var count = 0;\n        var len = 0;\n\n        level0Items.each(function () {\n          if (!(0, _jquery2['default'])(this).hasClass('hidden')) {\n            level0Values.push((0, _jquery2['default'])(this).attr('data-value'));\n          }\n        });\n\n        level0Values.forEach(function (d) {\n          if (selected.indexOf(d) !== -1) {\n            count++;\n          }\n          len++;\n        });\n\n        if (len > 0) {\n          if (count > 0 && count < len) {\n            $ctrl[direction + 'Sub'] = true;\n          } else {\n            $ctrl[direction + 'Sub'] = false;\n          }\n          if (count === len) {\n            if ($ctrl[direction + 'Checkbox'] === false) {\n              $ctrl[direction + 'Checkbox'] = true;\n              $scope.isSelectedChangeCheckbox = true;\n            }\n          } else if ($ctrl[direction + 'Checkbox'] === true) {\n            $ctrl[direction + 'Checkbox'] = false;\n            $scope.isSelectedChangeCheckbox = true;\n          }\n        }\n      }\n\n      function toRight() {\n        $scope.$broadcast('search.clear');\n        if (angular.isNull($scope.model)) {\n          $scope.model = [];\n        }\n        $scope.model = $scope.model.concat($ctrl.leftSelected);\n        $ctrl.leftSelected = [];\n        $ctrl.rightSelected = [];\n        $ctrl.leftCheckbox = false;\n        $ctrl.rightCheckbox = false;\n      }\n\n      function toLeft() {\n        $scope.$broadcast('search.clear');\n        if (angular.isNull($scope.model)) {\n          $scope.model = [];\n        }\n        var oldModel = getModelWidthChild();\n        var newModel = [];\n        var selectWithChild = getSelectedWithChild();\n\n        angular.each(oldModel, function (d) {\n          if (selectWithChild.indexOf(d) === -1) {\n            newModel.push(d);\n          }\n        });\n\n        $scope.model = newModel;\n        $ctrl.leftSelected = [];\n        $ctrl.rightSelected = [];\n        $ctrl.leftCheckbox = false;\n        $ctrl.rightCheckbox = false;\n      }\n\n      function getModelWidthChild() {\n        var model = $scope.model || [];\n        var newModel = [];\n\n        function getSub(items) {\n          angular.each(items, function (d) {\n            if (model.indexOf(d[$scope.valueKey] + '') !== -1) {\n              if (d[$scope.subKey] && d[$scope.subKey].length) {\n                pushSub(d[$scope.subKey]);\n              } else {\n                newModel.push(d[$scope.valueKey] + '');\n              }\n            } else {\n              getSub(d[$scope.subKey]);\n            }\n          });\n        }\n\n        function pushSub(items) {\n          angular.each(items, function (d) {\n            if (d[$scope.subKey] && d[$scope.subKey].length) {\n              pushSub(d[$scope.subKey]);\n            } else {\n              newModel.push(d[$scope.valueKey] + '');\n            }\n          });\n        }\n\n        getSub($scope.data);\n\n        return newModel;\n      }\n\n      function getSelectedWithChild() {\n        var newSelected = [];\n        var selected = $ctrl.rightSelected || [];\n\n        function checkSub(items) {\n          angular.each(items, function (d) {\n            var sub = d[$scope.subKey];\n            if (selected.indexOf(d[$scope.valueKey] + '') !== -1 && sub && sub.length) {\n              pushSub(sub);\n            } else if (sub && sub.length) {\n              checkSub(sub);\n            }\n          });\n        }\n\n        function pushSub(sub) {\n          angular.each(sub, function (dd) {\n            newSelected.push(dd[$scope.valueKey] + '');\n            if (dd[$scope.subKey] && dd[$scope.subKey].length) {\n              pushSub(dd[$scope.subKey]);\n            }\n          });\n        }\n\n        checkSub($scope.data);\n\n        return selected.concat(newSelected);\n      }\n\n      function filterChild() {\n        var selected = $scope.model || [];\n        var newModel = [];\n        var splicedArray = [];\n        var sameCount = 0;\n\n        function checkSub(items) {\n          var subInLen = 0;\n          angular.forEach(items, function (d) {\n            if (selected.indexOf(d[$scope.valueKey] + '') !== -1) {\n              newModel.push(d[$scope.valueKey] + '');\n              subInLen++;\n            } else {\n              var sub = d[$scope.subKey];\n              if (sub && sub.length) {\n                var _subInLen = checkSub(sub);\n                // 如果子全部在，就只存在父级\n                if (_subInLen >= sub.length) {\n                  newModel.push(d[$scope.valueKey] + '');\n                  angular.each(sub, function (s) {\n                    if (newModel.indexOf(s[$scope.valueKey] + '') !== -1) {\n                      newModel.splice(newModel.indexOf(s[$scope.valueKey] + ''), 1);\n                    }\n                  });\n                }\n              }\n            }\n          });\n          return subInLen;\n        }\n\n        checkSub($scope.data);\n\n        newModel.forEach(function (d) {\n          if (selected.indexOf(d) !== -1) {\n            sameCount++;\n          }\n        });\n\n        return sameCount < selected.length ? newModel : false;\n      }\n\n      function updateLeftRigthData() {\n        var leftData = _jquery2['default'].extend(true, [], $scope.data);\n        var rightData = _jquery2['default'].extend(true, [], $scope.data);\n\n        $ctrl.leftData = leftData;\n        $ctrl.rightData = rightData;\n      }\n\n      function getParentAndChild(selected) {\n        var newSelected = [];\n\n        function get(items) {\n          angular.each(items, function (item) {\n            if (selected.indexOf(item[$scope.valueKey] + '') !== -1) {\n              var cItem = item;\n\n              newSelected.push(item[$scope.valueKey] + '');\n\n              while (cItem._parent) {\n                if (newSelected.indexOf(cItem._parent[$scope.valueKey] + '') === -1) {\n                  newSelected.push(cItem._parent[$scope.valueKey] + '');\n                }\n                cItem = cItem._parent;\n              }\n\n              getSub(item[$scope.subKey]);\n            }\n\n            if (item[$scope.subKey] && item[$scope.subKey].length) {\n              get(item[$scope.subKey]);\n            }\n          });\n        }\n\n        function getSub(sub) {\n          if (sub && sub.length) {\n            angular.each(sub, function (item) {\n              newSelected.push(item[$scope.valueKey] + '');\n              getSub(item[$scope.subKey]);\n            });\n          }\n        }\n\n        get($ctrl.leftData);\n\n        return newSelected;\n      }\n    }],\n    link: function link(scope, element, attrs, ctrl) {\n      scope.textKey = attrs.maTextKey || 'text';\n      scope.valueKey = attrs.maValueKey || 'value';\n\n      attrs.$observe('maTextKey', function (d) {\n        scope.textKey = d || 'text';\n      });\n      attrs.$observe('maValueKey', function (d) {\n        scope.valueKey = d || 'value';\n      });\n    }\n  };\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/transfer2/src/treeTransfer2Directive.js\n// module id = s87f\n// module chunks = 17","'use strict';\n\nvar _name = require('./name.js');\n\nvar _name2 = _interopRequireDefault(_name);\n\nvar _templateWeb = require('art-template/lib/template-web.js');\n\nvar _templateWeb2 = _interopRequireDefault(_templateWeb);\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _maTreeTpl = require('./maTreeTpl.html');\n\nvar _maTreeTpl2 = _interopRequireDefault(_maTreeTpl);\n\nvar _itemTpl = require('./itemTpl.html');\n\nvar _itemTpl2 = _interopRequireDefault(_itemTpl);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nangular.module(_name2['default']).directive('maTree', maTree);\n\nmaTree.$inject = [];\n\nfunction maTree() {\n  return {\n    restrict: 'E',\n    replace: true,\n    scope: {\n      data: '=maData',\n      model: '=ngModel',\n      valueKey: '@maValueKey',\n      textKey: '@maTextKey',\n      subKey: '@maSubKey',\n      disabled: '=ngDisabled',\n\n      showItems: '=maShowItems',\n      hideItems: '=maHideItems'\n    },\n    template: _maTreeTpl2['default'],\n    controllerAs: '$ctrl',\n    controller: ['$scope', '$element', function ($scope, $element) {\n      var $ctrl = this;\n      var contentTarget = (0, _jquery2['default'])($element).find('.ui-select-choices-content');\n      var itemCls = '.ui-select-choices-row';\n      var subStore = {};\n\n      $ctrl.searchKey = '';\n\n      $scope.$on('search.clear', function () {\n        $ctrl.searchKey = '';\n      });\n\n      $scope.$watch('$ctrl.searchKey', function (d) {\n        expandMatch(d);\n      });\n      $scope.$watch('disabled', updateDisabled);\n\n      $scope.$watch('data', function (d) {\n        var items = updateTree(d);\n\n        $scope.newItems = items;\n        renderContent(items);\n      });\n\n      $scope.$watch('showItems', function (d) {\n        // console.log('show items', d);\n        if (d) {\n          updateHideShow();\n        }\n      });\n      $scope.$watch('hideItems', function (d) {\n        // console.log('hide items', d);\n        if (d) {\n          updateHideShow();\n        }\n      });\n\n      $scope.$watch('model', function (d) {\n        // console.log('tree model', d);\n\n        // 全不选\n        if (angular.isEmpty(d)) {\n          contentTarget.find(itemCls).each(function () {\n            // if (!$(this).hasClass('hidden')) {\n            (0, _jquery2['default'])(this).find('input').prop('checked', false);\n            // }\n          });\n          contentTarget.find('.ma-checkbox').removeClass('has-sub');\n        }\n\n        // 全选\n        if (d === 'all') {\n          var newModel = [];\n          contentTarget.find(itemCls).each(function () {\n            if (!(0, _jquery2['default'])(this).hasClass('hidden')) {\n              (0, _jquery2['default'])(this).find('input').prop('checked', true);\n              newModel.push((0, _jquery2['default'])(this).attr('data-value'));\n            }\n          });\n          contentTarget.find('.ma-checkbox').removeClass('has-sub');\n\n          $scope.model = newModel;\n        }\n      });\n\n      function expandMatch(searchKey) {\n        contentTarget.find('.search-match').removeClass('search-match');\n        if (angular.isNull(searchKey)) {\n          return;\n        }\n\n        var expands = [];\n        var unexpand = [];\n\n        $scope.newItems.forEach(function (d) {\n          var item = d;\n\n          if ((item[$scope.textKey] + '').indexOf(searchKey) !== -1 && item._from) {\n            expands.push(item._from);\n            while (item._parent && item._parent._from) {\n              expands.push(item._parent._from);\n              item = item._parent;\n            }\n          }\n        });\n\n        function doExpand() {\n          expands.forEach(function (d) {\n            var arrow = contentTarget.find(itemCls + '[data-to=\"' + d + '\"] .tree-arrow-click');\n\n            if (arrow.length) {\n              if (!arrow.parent().hasClass('tree-open')) {\n                arrow.trigger('click');\n              }\n            } else {\n              unexpand.push(d);\n            }\n          });\n          expands = unexpand;\n          unexpand = [];\n          if (expands.length) {\n            doExpand();\n          }\n        }\n\n        doExpand();\n\n        // 设置match class\n        $scope.newItems.forEach(function (d) {\n          if ((d[$scope.textKey] + '').indexOf(searchKey) !== -1) {\n            contentTarget.find(itemCls + '[data-value=\"' + (d[$scope.valueKey] + '') + '\"]').addClass('search-match');\n          }\n        });\n      }\n\n      function updateDisabled() {\n        if ($scope.disabled) {\n          contentTarget.find('input, .ma-checkbox').attr('disabled', true);\n        } else {\n          contentTarget.find('input, .ma-checkbox').attr('disabled', false);\n        }\n      }\n\n      function renderContent(data) {\n        var items = (0, _jquery2['default'])(_templateWeb2['default'].render(_itemTpl2['default'], {\n          data: data,\n          textKey: $scope.textKey,\n          valueKey: $scope.valueKey\n        }));\n\n        bindEvent(items);\n\n        contentTarget.html(items);\n\n        updateHideShow();\n      }\n\n      function updateHideShow() {\n        // 如果有要隐藏的隐藏\n        if ($scope.hideItems) {\n          var parents = getParents($scope.hideItems);\n          var childs = getChilds($scope.hideItems);\n\n          contentTarget.find(itemCls).removeClass('hidden');\n          $scope.hideItems.forEach(function (d) {\n            var value = angular.isObject(d) ? d[$scope.valueKey] + '' : d;\n            var item = contentTarget.find(itemCls + '[data-value=\"' + value + '\"]');\n            item.addClass('hidden');\n          });\n          childs.forEach(function (d) {\n            contentTarget.find(itemCls + '[data-value=\"' + d + '\"]').addClass('hidden');\n          });\n          parents.forEach(function (d) {\n            contentTarget.find(itemCls + '[data-value=\"' + d + '\"]').removeClass('hidden');\n          });\n        }\n\n        // 如果有要现实的显示\n        if ($scope.showItems) {\n          var _parents = getParents($scope.showItems);\n          var _childs = getChilds($scope.showItems);\n\n          contentTarget.find(itemCls).addClass('hidden');\n\n          $scope.showItems.forEach(function (d) {\n            var value = angular.isObject(d) ? d[$scope.valueKey] + '' : d;\n            var item = contentTarget.find(itemCls + '[data-value=\"' + value + '\"]');\n\n            item.removeClass('hidden');\n          });\n\n          _parents.concat(_childs).forEach(function (d) {\n            contentTarget.find(itemCls + '[data-value=\"' + d + '\"]').removeClass('hidden');\n          });\n        }\n      }\n\n      function getChilds(itemValues) {\n        var childs = [];\n        angular.each($scope.newItems, function (d) {\n          if (itemValues.indexOf(d[$scope.valueKey] + '') !== -1) {\n            getChild(d);\n          }\n        });\n\n        function getChild(item) {\n          var sub = item[$scope.subKey];\n          if (sub && sub.length) {\n            sub.forEach(function (d) {\n              childs.push(d[$scope.valueKey] + '');\n              getChild(d);\n            });\n          }\n        }\n        return childs;\n      }\n\n      function getParents(itemValues) {\n        var parents = [];\n        angular.each($scope.newItems, function (d) {\n          if (itemValues.indexOf(d[$scope.valueKey] + '') !== -1) {\n            var item = d;\n            while (item._parent) {\n              parents.push(item._parent[$scope.valueKey] + '');\n              item = item._parent;\n            }\n          }\n        });\n        return parents;\n      }\n\n      function toggleTree(e) {\n        if ($scope.disabled) {\n          return;\n        }\n\n        var target = (0, _jquery2['default'])(e.target);\n        var item = target.parents(itemCls);\n        var to = item.attr('data-to');\n        var froms = contentTarget.find(itemCls + '[data-from=\"' + to + '\"]');\n        var fromChilds = contentTarget.find(itemCls + '[data-from*=\"' + to + '_\"]');\n\n        if (!froms.length) {\n          froms = (0, _jquery2['default'])(_templateWeb2['default'].render(_itemTpl2['default'], {\n            data: subStore[to],\n            textKey: $scope.textKey,\n            valueKey: $scope.valueKey,\n            renderSub: true\n          }));\n          froms.insertAfter(item);\n          bindEvent(froms, item);\n          updateHideShow();\n        } else {\n          froms.toggleClass('hide');\n          fromChilds.toggleClass('child-hide');\n        }\n        target.parent().toggleClass('tree-open');\n      }\n\n      function bindEvent(items, parent) {\n        items.find('.tree-arrow-click').on('click', toggleTree);\n        items.find('input[type=\"checkbox\"]').on('change', function (e) {\n          checkedSub((0, _jquery2['default'])(e.target).parents(itemCls).attr('data-to'), e.target.checked);\n          checkedParent((0, _jquery2['default'])(e.target).parents(itemCls).attr('data-from'), e.target.checked);\n          updateModel();\n        });\n        if (parent) {\n          checkedSub(parent.attr('data-to'), parent.find('input').prop('checked'));\n        }\n        updateDisabled();\n      }\n\n      function updateModel() {\n        // console.log('update model');\n        var newModel = [];\n        var selectedes = contentTarget.find('input:checked');\n\n        selectedes.each(function () {\n          var item = (0, _jquery2['default'])(this).parents(itemCls);\n          var from = item.attr('data-from');\n          var parent = contentTarget.find(itemCls + '[data-to=\"' + from + '\"]');\n          var parentValue = parent.attr('data-value');\n\n          if (hasParentSelected(item)) {\n            return true;\n          }\n          newModel.push(item.attr('data-value'));\n          return true;\n        });\n\n        $scope.$applyAsync(function () {\n          $scope.model = newModel;\n        });\n      }\n\n      function hasParentSelected(item) {\n        var from = item.attr('data-from');\n        var parent = contentTarget.find(itemCls + '[data-to=\"' + from + '\"]');\n        var ret = false;\n\n        ret = !!(from && parent.length && parent.find('input').prop('checked'));\n\n        if (ret === false && from && parent.attr('data-from')) {\n          ret = hasParentSelected(parent);\n        }\n\n        return ret;\n      }\n\n      function checkedSub(to, checked) {\n        if (to) {\n          var items = contentTarget.find(itemCls + '[data-from=\"' + to + '\"]');\n          var item = contentTarget.find(itemCls + '[data-to=\"' + to + '\"]');\n\n          items.each(function () {\n            if (!(0, _jquery2['default'])(this).hasClass('hidden')) {\n              (0, _jquery2['default'])(this).find('input').prop('checked', checked);\n              checkedSub((0, _jquery2['default'])(this).attr('data-to'), checked);\n            }\n          });\n          item.find('.ma-checkbox').removeClass('has-sub');\n        }\n      }\n\n      function checkedParent(from) {\n        if (from) {\n          var items = contentTarget.find(itemCls + '[data-to=\"' + from + '\"]');\n          var maCheckbox = items.find('.ma-checkbox');\n          var data = getSubCheckedCount(from);\n\n          maCheckbox.removeClass('has-sub');\n          if (data.count <= 0) {\n            items.find('input').prop('checked', false);\n            if (data.sub) {\n              maCheckbox.addClass('has-sub');\n            }\n          } else if (data.count >= data.total) {\n            items.find('input').prop('checked', true);\n          } else {\n            items.find('input').prop('checked', false);\n            maCheckbox.addClass('has-sub');\n          }\n\n          checkedParent(items.attr('data-from'));\n        }\n      }\n\n      function getSubCheckedCount(from) {\n        var items = contentTarget.find(itemCls + '[data-from=\"' + from + '\"]');\n        var count = 0;\n        var total = 0;\n        var sub = 0;\n\n        items.each(function () {\n          if (!(0, _jquery2['default'])(this).hasClass('hidden')) {\n            if ((0, _jquery2['default'])(this).find('input').prop('checked')) {\n              count++;\n            }\n            if ((0, _jquery2['default'])(this).find('.ma-checkbox').hasClass('has-sub')) {\n              sub++;\n            }\n            total++;\n          }\n        });\n        return {\n          total: total,\n          count: count,\n          sub: sub\n        };\n      }\n\n      function updateTree(items) {\n        var newItems = [];\n        var subKey = $scope.subKey;\n\n        subStore = {};\n\n        function getSub(items, parentItem, treeLevel) {\n          angular.each(items, function (d) {\n            var item = d;\n\n            newItems.push(item);\n\n            item._level = treeLevel;\n\n            if (item[subKey] && item[subKey].length) {\n              item.tagId = parentItem ? parentItem.tagId + '_' + angular.uuid() : 'tag_' + angular.uuid();\n              item._to = item.tagId;\n              item._sub = true;\n              subStore[item.tagId] = item[subKey];\n              angular.forEach(item[subKey], function (it) {\n                it._parent = item;\n                it._from = item.tagId;\n              });\n              getSub(item[subKey], item, treeLevel + 1);\n            }\n          });\n        }\n        getSub(items, null, 0);\n        return newItems;\n      }\n    }],\n    link: function link(scope, element, attrs, ctrl) {\n      scope.textKey = attrs.maTextKey || 'text';\n      scope.valueKey = attrs.maValueKey || 'value';\n\n      attrs.$observe('maTextKey', function (d) {\n        scope.textKey = d || 'text';\n      });\n      attrs.$observe('maValueKey', function (d) {\n        scope.valueKey = d || 'value';\n      });\n    }\n  };\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/transfer2/src/treeDirective.js\n// module id = xEAJ\n// module chunks = 17"],"sourceRoot":""}