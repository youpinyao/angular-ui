{"version":3,"sources":["webpack:///./src/components/tooltip/index.js","webpack:///./src/components/tooltip/src/maTooltipTpl.html","webpack:///./src/components/tooltip/src/directive.js","webpack:///./src/components/tooltip/src/name.js"],"names":["angular","module","config","run","require","directive","maTooltip","$inject","$timeout","$compile","restrict","scope","contentScope","link","element","attrs","ctrl","el","content","find","defaultDirection","isPopconfirm","direction","prevDirection","append","hover","showTip","hideTip","on","mousemove","$observe","html","d","contents","addClass","$on","remove","off","attr","width","height","newDirection","offsetTop","offset","top","offsetLeft","left","elHeight","outerHeight","elWidth","outerWidth","elementHeight","elementWidth","boxPadding","hasNew","css","checkPositon","window","scrollTop","scrollLeft","wh","ww","newDirectionFirst","split","newDirectionSecond","newDirectionFirstReseted","removeClass","e","stopPropagation"],"mappings":"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","file":"tooltip.js","sourcesContent":["import moduleName from './src/name.js';\n\nangular.module(moduleName, []).config(function () {}).run(function () {});\n\nrequire('./src/directive.js');\n\nexport default moduleName;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/tooltip/index.js","module.exports = \"<div\\n  class=\\\"ma-tooltip\\\"\\n>\\n  <div\\n    class=\\\"ma-tooltip-content\\\"\\n  ></div>\\n</div>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tooltip/src/maTooltipTpl.html\n// module id = pSmv\n// module chunks = 20","import moduleName from './name.js';\nimport $ from 'jquery';\nimport maTooltipTpl from './maTooltipTpl.html';\n\nangular.module(moduleName)\n  .directive('maTooltip', maTooltip);\n\nmaTooltip.$inject = ['$timeout', '$compile'];\n\nfunction maTooltip($timeout, $compile) {\n  return {\n    restrict: 'A',\n    scope: {\n      contentScope: '=maScope',\n    },\n    link: function(scope, element, attrs, ctrl) {\n      const el = $(maTooltipTpl);\n      const content = el.find('.ma-tooltip-content');\n      const defaultDirection = 'tc';\n\n      let isPopconfirm = false;\n      let direction = defaultDirection;\n      let prevDirection = '';\n\n      $('body').append(el);\n\n      $(element).hover(d => {\n        if (isPopconfirm) {\n          return;\n        }\n        showTip();\n      }, () => {\n        if (isPopconfirm) {\n          return;\n        }\n        hideTip();\n      }).on('mousemove', mousemove);\n\n      el.hover(d => {\n        if (isPopconfirm) {\n          return;\n        }\n        showTip();\n      }, () => {\n        if (isPopconfirm) {\n          return;\n        }\n        hideTip();\n      }).on('mousemove', mousemove);\n\n      $('body').on('mousemove', hideTip);\n\n      attrs.$observe('maTooltip', d => {\n        content.html(d);\n        $compile(content.contents())(scope.contentScope || scope);\n      });\n      attrs.$observe('maPopconfirm', d => {\n        if (d == 'true') {\n          isPopconfirm = true;\n          el.addClass('ma-popconfirm-tooltip');\n          element.on('click', () => {\n            showTip();\n          });\n        }\n      });\n      scope.$on('$destroy', d => {\n        el.remove();\n        $('body').off('mousemove', hideTip);\n      });\n      attrs.$observe('maDirection', d => {\n        direction = d || defaultDirection;\n        el.attr('data-direction', d || defaultDirection);\n        content.attr('data-direction', d || defaultDirection);\n        $timeout(() => {\n          el.width(el.width());\n          el.height(el.height());\n        });\n      });\n\n      function showTip(newDirection) {\n        const offsetTop = $(element).offset().top;\n        const offsetLeft = $(element).offset().left;\n        const elHeight = el.outerHeight();\n        const elWidth = el.outerWidth();\n        const elementHeight = $(element).outerHeight();\n        const elementWidth = $(element).outerWidth();\n\n        const boxPadding = 10;\n\n        let top = 0;\n        let left = 0;\n        let hasNew = false;\n\n        if (prevDirection) {\n          direction = prevDirection;\n          el.attr('data-direction', direction);\n          content.attr('data-direction', direction);\n        }\n\n        if (newDirection && typeof newDirection === 'string') {\n          prevDirection = direction;\n          direction = newDirection;\n          hasNew = true;\n          el.attr('data-direction', direction);\n          content.attr('data-direction', direction);\n        }\n\n        switch (direction) {\n          case 'tc':\n            top = offsetTop - elHeight;\n            left = offsetLeft + ((elementWidth - elWidth) / 2);\n            break;\n          case 'tl':\n            top = offsetTop - elHeight;\n            left = offsetLeft - boxPadding;\n            break;\n          case 'tr':\n            top = offsetTop - elHeight;\n            left = (offsetLeft + boxPadding) - (elWidth - elementWidth);\n            break;\n          case 'lc':\n            top = offsetTop - ((elHeight - elementHeight) / 2);\n            left = offsetLeft - elWidth;\n            break;\n          case 'lt':\n            top = offsetTop - boxPadding;\n            left = offsetLeft - elWidth;\n            break;\n          case 'lb':\n            top = (offsetTop + boxPadding) - (elHeight - elementHeight);\n            left = offsetLeft - elWidth;\n            break;\n          case 'rc':\n            top = offsetTop - ((elHeight - elementHeight) / 2);\n            left = offsetLeft + elementWidth;\n            break;\n          case 'rt':\n            top = offsetTop - boxPadding;\n            left = offsetLeft + elementWidth;\n            break;\n          case 'rb':\n            top = (offsetTop + boxPadding) - (elHeight - elementHeight);\n            left = offsetLeft + elementWidth;\n            break;\n          case 'bc':\n            top = offsetTop + elementHeight;\n            left = offsetLeft + ((elementWidth - elWidth) / 2);\n            break;\n          case 'bl':\n            top = offsetTop + elementHeight;\n            left = offsetLeft - boxPadding;\n            break;\n          case 'br':\n            top = offsetTop + elementHeight;\n            left = (offsetLeft + boxPadding) - (elWidth - elementWidth);\n            break;\n        }\n\n        el.css({\n          top,\n          left,\n        });\n\n        $timeout(function() {\n          if (!hasNew) {\n            checkPositon();\n          }\n          el.addClass('show');\n        }, 10);\n      }\n\n      function checkPositon() {\n        const offsetTop = el.offset().top - $(window).scrollTop();\n        const offsetLeft = el.offset().left - $(window).scrollLeft();\n        const wh = $(window).height();\n        const ww = $(window).width();\n        const elHeight = el.outerHeight();\n        const elWidth = el.outerWidth();\n        const elementHeight = $(element).outerHeight();\n        const elementWidth = $(element).outerWidth();\n\n        // console.log(offsetTop, offsetLeft);\n\n        let newDirectionFirst = direction.split('')[0];\n        let newDirectionSecond = direction.split('')[1];\n        let newDirectionFirstReseted = false;\n        let newDirection = '';\n\n        if (offsetTop < 0) {\n          newDirectionFirst = 'b';\n        } else if (offsetTop + elHeight > wh) {\n          newDirectionFirst = 't';\n        } else if (offsetLeft < 0) {\n          newDirectionFirst = 'r';\n        } else if (offsetLeft + elWidth > ww) {\n          newDirectionFirst = 'l';\n        }\n\n        if (newDirectionFirst == 't' || newDirectionFirst == 'b') {\n          if (offsetLeft < 0) {\n            newDirectionSecond = 'l';\n          } else if (offsetLeft + elWidth > ww) {\n            newDirectionSecond = 'r';\n          } else if (newDirectionSecond === 't' || newDirectionSecond === 'b') {\n            newDirectionSecond = 'c';\n          }\n        }\n\n        if (newDirectionFirst == 'l' || newDirectionFirst == 'r') {\n          if (offsetTop < 0) {\n            newDirectionSecond = 't';\n          } else if (offsetTop + elHeight > wh) {\n            newDirectionSecond = 'b';\n          } else if (newDirectionSecond === 'l' || newDirectionSecond === 'r') {\n            newDirectionSecond = 'c';\n          }\n        }\n\n        newDirection = newDirectionFirst + newDirectionSecond;\n\n        if (newDirection !== direction) {\n          prevDirection = '';\n          showTip(newDirection);\n        }\n      }\n\n      function hideTip() {\n        el.removeClass('show');\n      }\n\n      function mousemove(e) {\n        e.stopPropagation();\n      }\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/tooltip/src/directive.js","export default 'meetyou.angular.ui.tooltip';\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/tooltip/src/name.js"],"sourceRoot":""}